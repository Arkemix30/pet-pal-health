# ğŸ¤– AGENTS.md - Operational Guide

This document is the primary source of truth for AI agents and human contributors to understand, operate, and maintain the **PetCare Brain** repository.

---

## ğŸ¯ Purpose
PetCare Brain is a mobile-first Flutter application (Local-First) designed to track pet health (vaccines, meds, schedules). It uses **Isar** for local storage and **Supabase** for real-time cloud synchronization.

---

## ğŸš€ Quick Start
### Prerequisites
- Flutter SDK (stable)
- Dart SDK
- Supabase Account (URL/Key configured in `.env`)

### Setup Environment
```bash
# Install dependencies
flutter pub get

# Setup environment variables
# Ensure .env exists with SUPABASE_URL and SUPABASE_ANON_KEY
```

### Run Locally
```bash
# Run the app
flutter run

# Run code generation (Isar/Riverpod)
flutter pub run build_runner build --delete-conflicting-outputs
```

---

## ğŸ›  Key Commands
| Action | Command |
|--------|---------|
| **Install Deps** | `flutter pub get` |
| **Gen Code** | `flutter pub run build_runner build --delete-conflicting-outputs` |
| **Watch Code** | `flutter pub run build_runner watch --delete-conflicting-outputs` |
| **Lint Check** | `flutter analyze` |
| **Run Tests** | `flutter test` |
| **Build APK** | `flutter build apk --release` |

---

## ğŸ“ Folder Structure
```text
lib/
â”œâ”€â”€ core/             # Cross-cutting concerns (Constants, Theme, Utils)
â”œâ”€â”€ data/             # Data Layer (Local Isar, Remote Supabase, DTOs)
â”œâ”€â”€ domain/           # Business Layer (Entities and Interfaces)
â”œâ”€â”€ features/         # Logic by feature (Auth, PetMgmt, Schedules)
â””â”€â”€ presentation/     # UI Layer (Routing, Common Widgets)
assets/               # Images and Lottie animations
docs/                 # PRD, Architecture, and Plans
```

---

## â˜¢ï¸ Rules & Restrictions
1. **Never edit `*.g.dart` files**: These are generated by `build_runner`. Modify the source model or provider instead.
2. **Environment Security**: Never commit `.env` or hardcode API keys. Use `dotenv.env['KEY']`.
3. **Database Consistency**: Isar schemas in `lib/data/local/isar_models.dart` must match the remote Supabase structure for sync to work.
4. **State Management**: Use **Riverpod**. Avoid `setState` for global state or complex logic.
5. **UI Colors**: Respect the **Forest Green** palette (`0xFF2D6A4F`). Do not use violet/purple unless explicitly requested.

---

## ğŸ§ª Testing & Quality
- **Unit Tests**: Place in `test/` following the `lib/` structure.
- **Naming**: Test files must end in `_test.dart`.
- **Command**: `flutter test`
- **Standard**: AAA (Arrange, Act, Assert) pattern.

---

## ğŸ“ Conventions
- **Commits**: Use [Conventional Commits](https://www.conventionalcommits.org/) (e.g., `feat:`, `fix:`, `chore:`, `docs:`).
- **Naming**: `lower_snake_case` for files/folders, `UpperCamelCase` for classes, `lowerCamelCase` for variables.
- **Clean Code**: Keep functions under 40 lines. Use descriptive names.

---

## âœ… Definition of Done (Checklist)
Before submitting any change, verify:
- [ ] `flutter analyze` returns no issues.
- [ ] Any required code generation (`build_runner`) was executed.
- [ ] Changes do not break existing features.
- [ ] Conventional Commit message used.
- [ ] `.env` was NOT accidentally committed.
- [ ] New UI adheres to the premium Forest Green theme.
